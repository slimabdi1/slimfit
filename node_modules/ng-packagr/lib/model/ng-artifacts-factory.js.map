{"version":3,"file":"ng-artifacts-factory.js","sourceRoot":"","sources":["../../../src/lib/model/ng-artifacts-factory.ts"],"names":[],"mappings":";;AAAA,yCAAsC;AAEtC,uDAAwE;AAExE;IACU,mBAAmB,CAAC,KAAoB;QAC9C,MAAM,CAAC,KAAK,CAAC,uBAAuB,CAAC,OAAO,CAAC,sCAAoB,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC;IACtF,CAAC;IAEO,aAAa,CAAC,GAAG,KAAe;QACtC,MAAM,MAAM,GAAW,WAAI,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;QAC3C,MAAM,CAAC,WAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IACrC,CAAC;IAEM,8BAA8B,CAAC,KAAoB;QACxD,MAAM,YAAY,GAAW,WAAI,CAAC,OAAO,CAAC,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC,wBAAwB,CAAC,CAAC;QAEhG,MAAM,CAAC;YACL,IAAI,EAAE,WAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAC,SAAS,EAAE,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;YAChF,MAAM,EAAE,WAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC,eAAe,GAAG,SAAS,CAAC;YAC1E,MAAM,EAAE,WAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC,eAAe,GAAG,KAAK,CAAC;YACtE,OAAO,EAAE,WAAI,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,kBAAkB,GAAG,OAAO,CAAC;YACpE,QAAQ,EAAE,WAAI,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,kBAAkB,GAAG,gBAAgB,CAAC;SAC/E,CAAA;IACH,CAAC;IAEM,oCAAoC,CAAC,KAAoB;QAC9D,MAAM,gBAAgB,GAAW,WAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,cAAc,CAAC,CAAC;QAEvF,MAAM,CAAC;YACL,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,SAAS,EAAE,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;YACtF,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,GAAG,KAAK,CAAC,eAAe,SAAS,CAAC;YAC/E,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,GAAG,KAAK,CAAC,eAAe,KAAK,CAAC;YAC3E,OAAO,EAAE,WAAI,CAAC,cAAc,CAAC,GAAG,KAAK,CAAC,kBAAkB,OAAO,CAAC;YAChE,QAAQ,EAAE,WAAI,CAAC,cAAc,CAAC,GAAG,KAAK,CAAC,kBAAkB,gBAAgB,CAAC;SAC3E,CAAA;IACH,CAAC;CACF;AAjCD,gDAiCC","sourcesContent":["import { path } from './../util/path';\nimport { NgArtifacts } from './ng-artifacts';\nimport { NgPackageData, SCOPE_NAME_SEPARATOR } from './ng-package-data';\n\nexport class NgArtifactsFactory {\n  private _makeUmdPackageName(ngPkg: NgPackageData): string {\n    return ngPkg.packageNameWithoutScope.replace(SCOPE_NAME_SEPARATOR, '-') + '.umd.js';\n  }\n\n  private _unixPathJoin(...paths: string[]): string {\n    const joined: string = path.join(...paths);\n    return path.ensureUnixPath(joined);\n  }\n\n  public calculateArtifactPathsForBuild(ngPkg: NgPackageData): NgArtifacts {\n    const pathFromRoot: string = path.resolve(ngPkg.buildDirectory, ngPkg.pathOffsetFromSourceRoot);\n\n    return {\n      main: path.join(ngPkg.buildDirectory,'bundles', this._makeUmdPackageName(ngPkg)),\n      module: path.join(ngPkg.buildDirectory, ngPkg.fullPackageName + '.es5.js'),\n      es2015: path.join(ngPkg.buildDirectory, ngPkg.fullPackageName + '.js'),\n      typings: path.join(pathFromRoot, ngPkg.flatModuleFileName + '.d.ts'),\n      metadata: path.join(pathFromRoot, ngPkg.flatModuleFileName + '.metadata.json')\n    }\n  }\n\n  public calculateArtifactPathsForPackageJson(ngPkg: NgPackageData): NgArtifacts {\n    const rootPathFromSelf: string = path.relative(ngPkg.sourcePath, ngPkg.rootSourcePath);\n\n    return {\n      main: this._unixPathJoin(rootPathFromSelf, 'bundles', this._makeUmdPackageName(ngPkg)),\n      module: this._unixPathJoin(rootPathFromSelf, `${ngPkg.fullPackageName}.es5.js`),\n      es2015: this._unixPathJoin(rootPathFromSelf, `${ngPkg.fullPackageName}.js`),\n      typings: path.ensureUnixPath(`${ngPkg.flatModuleFileName}.d.ts`),\n      metadata: path.ensureUnixPath(`${ngPkg.flatModuleFileName}.metadata.json`)\n    }\n  }\n}\n"]}